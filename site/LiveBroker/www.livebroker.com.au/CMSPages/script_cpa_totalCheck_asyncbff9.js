jQuery.getScript("CMSScripts/Custom/Shared/jquery.tmpl.min.js",function(){});jQuery.endPoint="/api/TotalCheckApi/api/Validation";var FMC_checkEmail_totalCheck=function(n,t,i,r){var e;t=jQuery.parseJSON(t);var o=n.split("$"),s=o[o.length-1],u=jQuery("*[id$='"+s+"']"),f=u.val();return(FMC_removeInvalid(u),!f||f=="")?(FMC_addInvalid(u,t.errorMsg),!1):(e=!0,totalCheckEmail({criteria:{email:f},onComplete:function(n){var f,o;n.email_valid?(f=n.email_valid,o=n.mailserver_exists):n.result&&n.result.email_valid&&(f=n.result.email_valid,o=n.result.mailserver_exists);f!=="VALID"||o==="INVALID"?(e=!1,typeof r=="function"&&(FMC_addInvalid(u,t.errorMsg),r(u))):typeof i=="function"&&i()}}),e?!0:(FMC_addInvalid(u,t.errorMsg),!1))},FMC_checkMobileNumber_totalCheck=function(n,t,i,r,u,f,e){var l,o,h,a,p;t=jQuery.parseJSON(t);var c=i,v=n.split("$"),y=v[v.length-1],s=jQuery("*[id$='"+y+"']");if(FMC_removeInvalid(s),c||(c=s.val()),l=r!=undefined?r:jQuery('select[id$="UserInfo_Country"]').val()||"AU",o=!0,h=validatePhoneNumber(c,l),h.isValid?(c="+"+h.format.countryCode+h.format.areaCode+h.format.localNumber,s.val(c)):o=!1,a=!1,h.numberType!="MOBILE"&&h.numberType!="FIXED_LINE_OR_MOBILE"?u&&(o=!1):o&&(a=!0,p=totalCheckPhone({criteria:{number:c,country:l||"AU"},onComplete:function(n){var r,i;n.phone_status?(r=n.phone_status,i=n.country_code):n.result&&n.result.phone_status&&(r=n.result.phone_status,i=n.result.country_code);i!==""&&i&&i!="AU"&&(o=!0);r==="FailedFormatting"&&(o=!1);r==="Inactive"&&(o=!1);o?typeof f=="function"&&f():typeof e=="function"&&(FMC_addInvalid(s,t.errorMsg),e(s))}})),a)return o?!0:(FMC_addInvalid(s,t.errorMsg),!1);o?typeof f=="function"&&f():(FMC_addInvalid(s,t.errorMsg),typeof e=="function"&&e(s))},validatePhoneNumber=function(n,t){var c=t,r={isPossible:!1,isPossibleFailReason:"",isValid:!1,exceptionError:"",regionCode:"",numberType:"",format:{countryCode:"",areaCode:"",localNumber:""}},f=i18n.phonenumbers.PhoneNumberUtil.getInstance(),e,s,u,h,o;try{e=f.parseAndKeepRawInput(n,c)}catch(l){return r.isValid=!1,r.exceptionError=l,r}if(r.isPossible=f.isPossibleNumber(e),r.isPossible){r.isValid=f.isValidNumber(e);r.regionCode=f.getRegionCodeForNumber(e);u=i18n.phonenumbers.PhoneNumberType;switch(f.getNumberType(e)){case u.FIXED_LINE:r.numberType="FIXED_LINE";break;case u.MOBILE:r.numberType="MOBILE";break;case u.FIXED_LINE_OR_MOBILE:r.numberType="FIXED_LINE_OR_MOBILE";break;case u.TOLL_FREE:r.numberType="TOLL_FREE";break;case u.PREMIUM_RATE:r.numberType="PREMIUM_RATE";break;case u.SHARED_COST:r.numberType="SHARED_COST";break;case u.VOIP:r.numberType="VOIP";break;case u.PERSONAL_NUMBER:r.numberType="PERSONAL_NUMBER";break;case u.PAGER:r.numberType="PAGER";break;case u.UAN:r.numberType="UAN";break;case u.UNKNOWN:r.numberType="UNKNOWN"}}else{s=i18n.phonenumbers.PhoneNumberUtil.ValidationResult;switch(f.isPossibleNumberWithReason(e)){case s.INVALID_COUNTRY_CODE:r.isPossibleFailReason="INVALID_COUNTRY_CODE";break;case s.TOO_SHORT:r.isPossibleFailReason="TOO_SHORT";break;case s.TOO_LONG:r.isPossibleFailReason="TOO_LONG"}}if(r.isPossible&&r.isValid)for(h=i18n.phonenumbers.PhoneNumberFormat,o=f.format(e,h.INTERNATIONAL).split("-").join(" ").split(" "),r.format.countryCode=o[0].split("+").join(""),r.format.areaCode=o[1],i=2;i<o.length;i++)r.format.localNumber+=o[i].split("-").join("");return r}